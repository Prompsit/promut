{% extends "admin.html.jinja2" %}

{% block head %}
{% include "datatables.min.css.jinja2" %}

<style>
  .notes-row .notes-link {
    display: none;
  }

  .notes-row:hover .notes-link {
    display: block;
  }
</style>
{% endblock %}

{% block resources %}
{% include "datatables.min.js.jinja2" %}
<script src="{{ url_for('static', filename='js/admin/users' + infix + '.js') }}"></script>
{% endblock %}

{% block admin_content %}
<input type=hidden id="current_user" value="{{ get_uid() }}" />

<div class="multiple-users-actions-container">
  <button class="btn btn btn-outline-primary d-none" id="multiple-users-btn" type="button">
    Actions to selected users <i class="fas fa-ellipsis-v"></i>
  </button>
  <div class="multiple-user-actions" style="display: none;">
    <button class="dropdown-item text-danger delete-multiple-users" id="delete">
      <i class="fas fa-trash" style="width: 20px;"></i> Delete
    </button>
    <button class="dropdown-item become-btn become-admin" id="admin">
      <i class="fas fa-user-shield" style="width: 20px;"></i> To admin account
    </button>
    <button class="dropdown-item become-btn become-expert" id="expert">
      <i class="fas fa-user-graduate" style="width: 20px;"></i> To expert account
    </button>
    <button class="dropdown-item become-btn become-researcher" id="researcher">
      <i class="fas fa-user-graduate" style="width: 20px;"></i> To researcher account
    </button>
    <button class="dropdown-item become-btn become-normal" id="normal">
      <i class="fas fa-user" style="width: 20px;"></i> To beginner account
    </button>
  </div>
</div>

<table class="table table-striped table-bordered users-table">
  <thead>
    <th>ID</th>
    <th>Username</th>
    <th>Email</th>
    <th>Role</th>
    <th>Notes</th>
    <th></th>
  </thead>
</table>



<template id="users-table-actions-template">
  <div class="text-center">
    <div class="dropdown user-actions-dropdown">
      <button class="btn btn-link btn-sm" id="dropdownMenuButton" type="button" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        <i class="fas fa-ellipsis-v"></i> <span class="sr-only">Options</span>
      </button>
      <div class="dropdown-menu dropdown-menu-right actions-container" aria-labelledby="dropdownMenuButton">
        <button href="#" class="dropdown-item edit-user">
          <i class="fas fa-edit" style="width: 20px;"></i> Edit user notes
        </button>

        <button class="dropdown-item text-danger delete-user d-none" id="delete">
          <i class="fas fa-trash" style="width: 20px;"></i> Delete
        </button>

        <button class="dropdown-item become-btn become-admin d-none" id="admin">
          <i class="fas fa-user-shield" style="width: 20px;"></i> To admin account
        </button>

        <button class="dropdown-item become-btn become-expert d-none" id="expert">
          <i class="fas fa-user-graduate" style="width: 20px;"></i> To expert account
        </button>
        <button class="dropdown-item become-btn become-researcher d-none" id="researcher">
          <i class="fas fa-user-graduate" style="width: 20px;"></i> To researcher account
        </button>
        <button class="dropdown-item become-btn become-normal d-none" id="beginner">
          <i class="fas fa-user" style="width: 20px;"></i> To beginner account
        </button>
      </div>
    </div>
  </div>
</template>

<template id="notes-template">
  <div class="notes-container d-flex align-items-start justify-content-between">
    <span class="notes-content"></span>
    <a href="#" class="notes-link d-none" title="Edit user notes"><i class="fas fa-edit"></i></a>
  </div>
</template>
{% endblock %}